@inherits LayoutComponentBase
@using MudBlazor
@inject NavigationManager Nav
@inject ISnackbar Snackbar
@inject IDialogService DialogService
@inject IJSRuntime JS
@inject HttpClient Http
@using MudBlazor.Utilities

<MudThemeProvider />
<MudPopoverProvider />
<MudSnackbarProvider Style="z-index: 2000; background-color: white;" />

<MudLayout>
    <!-- TOP BAR WITH LOGO -->
	<MudAppBar Elevation="0" Style="background-color:#154ba3; height:80px; z-index:600;">
        <MudImage Src="images/Female_Logo.jpg" Alt="Turkcell Logo" Width="100" Class="mt-4" />
        <MudSpacer />
        <MudText Class="mr-4"
                 Style="color:white; font-weight:bold; cursor:pointer; display:inline; margin-top:50px"
                 @onclick="Logout">
            Logout
        </MudText>
    </MudAppBar>
    <!-- Sidebar Drawer -->
    <MudDrawer Open="true"
               Variant="DrawerVariant.Persistent"
               Anchor="Anchor.Start"
               Elevation="1"
               ClipMode="DrawerClipMode.Always"
               Class="pa-2"
               Style="margin-top:10px; background-color:#E0E0E0; width:200px; z-index:500;">
        <MudNavMenu>
            <!-- Section: İşlem Listesi -->
            <MudText Class="ml-6 mt-6 mb-6" Style="color:black; font-weight:bold;">İşlem Listesi</MudText>
            
            <!-- Bilgi Güncelleme -->
            <MudText Class="ml-6 mt-4 mb-4" Style="color:black; cursor:pointer; display:block;" @onclick="@(() => 
                                            { Nav.NavigateTo("/update"); })">
                Bilgi Güncelleme
            </MudText>
            <!-- Ödeme İşlemleri -->
            <MudText Class="ml-6 mt-4 mb-4" Style="color:black; cursor:pointer; display:block;" @onclick="@(() =>
                                            { })"> 
                Ödeme İşlemleri
            </MudText>

            <MudDivider Class="my-2" />
            <!-- Main navigation -->
            <MudNavLink Href="/admin" Icon="@Icons.Material.Filled.Dashboard" Match="NavLinkMatch.All" Style="color:black; margin-top:10px;">
                Ana Sayfam
            </MudNavLink>
            <MudNavLink Href="/settings" Icon="@Icons.Material.Filled.Settings" Match="NavLinkMatch.All" Style="color:black;">
                Ayarlarım
            </MudNavLink>
        </MudNavMenu>
    </MudDrawer>
         <!-- Main Content -->
        <MudMainContent Class="p-4" Style="margin-top:30px;">
        @Body
         </MudMainContent>
</MudLayout>

@code {

    private async Task Logout()
    {
        await JS.InvokeVoidAsync("sessionStorage.removeItem", "authToken");
        Http.DefaultRequestHeaders.Authorization = null;
        Nav.NavigateTo("/login", true);
    }
    }